\section{Performance Metrics}
\label{sec:methodology:metrics}

When we simulate our workloads, we expect destructive interference between benchmarks to cause slowdowns.
Performance metrics is needed to quantify the performance of workloads and in order to compare the performance of different cache partitioning algorithms.
We define two metrics; system throughput (STP) and the harmonic mean of speedup (HMS).

In order to define STP and HMS, two concepts are needed; private mode execution time and shared mode execution time.
Shared mode execution time is the simulation time of a benchmark when run as a part of a workload.
Private mode execution time is the simulation time of a benchmark when run alone on the same processor model.
By definition, we expect a benchmark to execute slower in shared mode than in private mode.

Based on private and shared mode execution time we can define normalized progress (NP), or speedup, as $NP_i = \frac{T^{P}_i}{T^{S}_i}$.
Here $T^{P}_i$ and $T^{S}_i$ is respectively the private and shared mode execution time for benchmark $i$.
Normalized progress is a measure of benchmark progression in shared mode.
A perfect value of 1 indicates that the benchmark progresses just as fast in shared and private mode.
While a value of 0.5 indicates that the benchmark progresses at half the rate in shared mode compared to private mode.
STP as defined by L. Eeckhout~\cite{Eeckhout2010} as the sum of NP for all benchmarks in a workload, as shown in equation~\ref{eq:STP}
By definition, a perfect STP value equals the count of the benchmarks in a workload, in our case either 4, 8 or 16.

\begin{equation} \label{eq:STP} 
 STP = {\sum\limits_{n=1}^{k}}\frac{T^{P}_i}{T^{S}_i}
\end{equation}

In addition to STP, we define HMS as the harmonic mean of NP values, as shown in equation~\ref{eq:HMS}.
The summation kernel in HMS is also known as normalized turnaround time (NTT).
HMS is therefore by definition the reciprocal of average normalized turnaround-time (ANTT)~\cite{Eeckhout2010}, and hence HMS has a system level meaning relating to the average benchmark's normalized turnaround-time.

\begin{equation} \label{eq:HMS}
 HMS = \frac{k}{{\sum\limits_{n=1}^{k}\frac{1}{\frac{T^{P}_i}{T^{S}_i}}}} = \frac{k}{{\sum\limits_{n=1}^{k}\frac{T^{S}_i}{T^{P}_i}}}
\end{equation}

In general an increase in system throughput is also expected to improve turnaround time.
However, there are cases where this is not true.
A simple example would be a scheduler that prioritizes small jobs, hence improving throughput and STP, but by leaving long jobs in the queue turnaround time will increase and hence HMS will decrease.
In order to get an insight into system performance, we need to consider both metrics.

In addition to HMS and STP, we will use misses per kilo instruction (mpki) when evaluating cache partitioning algorithms.
mpki is simply defined as the total number of misses in the LLC, per 1000 instructions.
mpki an important metric in our experiments, especially because we are simulating an out of order core. 
Due to latency hiding in the processor we cannot assume that a reduction in mpki necessarily will increase performance nor that a performance increase must be caused by a reduction in mpki.
As a result, all three metrics are required to gain full insight into the effects of various cache partitioning algorithms.
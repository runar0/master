\section{Performance Metrics}
\label{sec:methodology:metrics}

When we simulate our workloads, we expect destructive interference between benchmarks to cause slowdowns.
Performance metrics is needed to quantify the performance of workloads and to compare the performance of different cache partitioning algorithms.
This section defines two metrics; system throughput (STP) and the harmonic mean of speedup (HMS)~\cite{Eeckhout2010}.

To define STP and HMS two concepts are needed; private mode execution time and shared mode execution time.
Shared mode execution time is the simulation time of a benchmark when run as a part of a workload.
Private mode execution time is the simulation time of a benchmark when run alone on the same processor model.
By definition, we expect a benchmark to execute slower in shared mode than in private mode.

Based on private and shared mode execution time we can define normalized progress (NP), or speedup, as ${NP}_i = \frac{T^{P}_i}{T^{S}_i}$.
Here $T^{P}_i$ and $T^{S}_i$ is respectively the private and shared mode execution time for benchmark $i$.
Normalized progress is a measure of benchmark progression in shared mode.
A perfect value of 1 indicates that the benchmark progresses just as fast in shared and private mode.
While a value of 0.5 indicates that the benchmark progresses at half the rate in shared mode compared to private mode.
STP is defined by L. Eeckhout~\cite{Eeckhout2010} as the sum of NP for all benchmarks in a workload, as shown in equation~\ref{eq:STP}.
By definition, a perfect STP value equals the number of benchmarks in a simulation, in our case either 4, 8 or 16.

\begin{equation} \label{eq:STP} 
 {STP} = {\sum\limits_{n=1}^{k}}\frac{T^{P}_i}{T^{S}_i}
\end{equation}

In addition to STP, we define HMS as the harmonic mean of NP values, as shown in equation~\ref{eq:HMS}.
The summation kernel in HMS is also known as normalized turnaround time (NTT).
HMS is therefore by definition the reciprocal of average normalized turnaround-time (ANTT)~\cite{Eeckhout2010}, and hence HMS has a system level meaning relating to the benchmark's average normalized turnaround-time.

\begin{equation} \label{eq:HMS}
 {HMS} = \frac{k}{{\sum\limits_{n=1}^{k}\frac{1}{\frac{T^{P}_i}{T^{S}_i}}}} = \frac{k}{{\sum\limits_{n=1}^{k}\frac{T^{S}_i}{T^{P}_i}}}
\end{equation}

In general an increase in system throughput is also expected to improve turnaround time.
However, there are cases where this is not true.
Given a workload where most benchmarks are performing well while one is performing badly.
Then, the one badly performing benchmark may pull the STP value down, indicating a badly performing workload.
At the same time, HMS could show another picture, as the average benchmark performance will be dominated by the well-performing benchmarks.
As a result, both STP and HMS are needed to get an insight into system performance.

In addition to HMS and STP, we will use misses per kilo instruction (MPKI) when evaluating cache partitioning algorithms.
MPKI is simply defined as the total number of misses in the LLC, per 1000 instructions.
MPKI an important metric in our experiments, especially because we are simulating an out of order core. 
Due to latency hiding in the processor we cannot assume that a reduction in MPKI necessarily will increase performance nor that a performance increase must be caused by a reduction in MPKI.
As a result, all three metrics are required to gain full insight into the effects of various cache partitioning algorithms.